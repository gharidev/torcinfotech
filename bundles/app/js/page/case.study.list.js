function initCaseStudiesList(){var d=$(".case-study-page"),a=+d.hasClass("editmode");if(a){function e(){$("img.lazy:not(.loaded)").each(function(e,a){var t=$(a);!t.attr("src")&&t.data("src")&&(t.attr("src",t.data("src")),t.addClass("loaded"))})}e(),$(document).ajaxSuccess(function(){e()})}var s=d.find(".search-wrapper"),l=s.find(".js-search-input"),t=s.find(".search-input-cross"),i=s.find(".search-btn"),n=d.find(".add-filter-wrapper"),c=d.find(".add-filter-btn"),o=d.find(".add-filter-editable"),f=o.find("input"),u=d.find(".filters-wrapper"),p=d.find(".mobile-filters-wrapper"),v=d.find(".visible-filters-editable"),h=d.find(".filter-descriptions-wrapper"),m=d.find(".cs-list-wrapper"),C=d.find(".more-cs-btn-wrapper"),g=C.find(".more-cs-btn");function r(){var i=l.val(),r=k(u.data("base-url"));!i||i.length<2||("undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: search",'Case Studies: search: "'+i+'"']),s.addClass("loading"),l.prop("disabled",!0),$.ajax({url:r,type:"GET",data:{query:i,ajax:!0},crossDomain:!1,success:function(e){if(s.removeClass("loading"),l.prop("disabled",!1),u.addClass("d-none"),p.addClass("d-none"),h.addClass("d-none"),m.html(e.listHtml),m.data("page",1),m.data("query",i),m.data("url",r),e.total){var a=m.data("results-for-label"),t=$("<strong>").text(i)[0].outerHTML;m.prepend('<div class="search-results-label">'+a+" "+t+"</div>")}e.page*e.perPage>=e.total?C.hide():C.show(),w(k(u.data("base-url"))+"?query="+i)}}))}function b(e,a){a=k(a),d.find(".mobile-filters-select").val(e),u.find(".cs-filter").removeClass("active"),u.find('.cs-filter[data-filter-id="'+e+'"]').addClass("active"),h.find(".cs-filter-description").removeClass("active");var t=h.find('.cs-filter-description[data-filter-id="'+e+'"]');t.addClass("active"),$.trim(t.html())||t.html(t.data("filter-description")),m.addClass("loading"),$.ajax({url:a,type:"GET",data:{ajax:!0},crossDomain:!1,success:function(e){m.removeClass("loading"),m.html(e.listHtml),m.data("page",1),m.data("query",""),m.data("url",a),e.page*e.perPage>=e.total?C.hide():C.show(),w(a)}})}function y(){u.find(".remove-cs-filter").on("click",function(e){var t=$(e.currentTarget).closest(".cs-filter"),i=t.data("filter-id");t.fadeOut(150,function(){t.find(".filter-title-editable").html(""),h.find('.cs-filter-description[data-filter-id="'+i+'"]').find(".filter-description-editable .pimcore_wysiwyg").html("");var e=v.text().split(","),a=e.indexOf(""+i);-1!==a&&(e.splice(a,1),v.text(e.join(","))),t.hasClass("active")&&u.find('.cs-filter[data-filter-id="all"]').click()})})}function k(e){return"http:"===window.location.protocol&&(e=e.replace("https:","http:")),e}function w(e){a||history.replaceState({},null,e)}l.on("change cut paste keyup",function(){if(l.val()?t.show():t.hide(),!l.val()){u.removeClass("d-none"),p.removeClass("d-none"),h.removeClass("d-none");var e=u.find(".cs-filter.active");b(e.data("filter-id"),e.data("url"))}}),t.on("click",function(){l.val("").change().focus()}),l.on("keypress",function(e){13===e.which&&r()}),i.on("click",function(){r()}),g.on("click",function(){var e=k(m.data("url")),a=m.data("query"),t=m.data("page");if("undefined"!=typeof _paq){var i=u.find(".cs-filter.active"),r=a?'query "'+a+'"':'filter "'+$.trim(i.text())+'"';_paq.push(["trackEvent","Case Studies","Case Studies: click",'Case Studies: click: "More" button -> '+r+" Page "+(t+1)])}g.addClass("loading"),$.ajax({url:e,type:"GET",data:{page:t+1,ajax:!0,query:a},crossDomain:!1,success:function(e){g.removeClass("loading"),m.data("page",e.page).append(e.listHtml),e.page*e.perPage>=e.total&&C.hide()}})}),y(),c.on("click",function(){var e=f.val();e&&(c.prop("disabled",!0),o.removeClass("error-border"),n.find(".error-element").remove(),$.ajax({url:"/object/list",type:"GET",data:{fullPaths:[e]},success:function(e){c.prop("disabled",!1);var a=d.data("language"),t=e.data[0],i="de"===a?t.deUrl:t.url;if(!i)return o.addClass("error-border"),void n.append('<span class="error-element">Filter should have url</span>');var r=u.data("base-url"),s=u.find('.cs-filter[data-filter-id="'+t.id+'"]');s.find("input").attr("placeholder",t.title),s.attr("href",r+"/"+i),s.show().fadeIn().addClass("new-filter"),setTimeout(function(){s.removeClass("new-filter")},1300),v.append(","+t.id),f.val(""),y()}}))}),u.find(".cs-filter").on("click",function(e){if(e.preventDefault(),e.target===e.currentTarget){var a=$(e.target);if(!a.hasClass("active")){var t=a.data("filter-id"),i=a.data("url");"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",'Case Studies: click: filter "'+$.trim(a.text())+'"']),b(t,i)}}}),d.find(".mobile-filters-select").on("change",function(e){var a=$(e.currentTarget).find("option:selected"),t=a.data("filter-id"),i=a.data("url");"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",'Case Studies: click: filter "'+$.trim(a.text())+'"']),b(t,i)})}
//# sourceMappingURL=case.study.list.js.map